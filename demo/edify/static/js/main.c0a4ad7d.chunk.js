(window.webpackJsonpedify=window.webpackJsonpedify||[]).push([[0],{27:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r=function(){return!e||!Object({NODE_ENV:"production",PUBLIC_URL:"/edify"})||!0}}).call(this,n(19))},28:function(e,t,n){e.exports=n(57)},33:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),u=(n(33),n(6)),l=n(24),i=n(10);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={loading:!1,error:null,username:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{loading:!0,username:null,error:null};case"LOGIN_SUCCESS":return p({},e,{},t.payload,{loading:!1});case"LOGIN_FAILURE":return p({},e,{loading:!1,error:t.payload});case"LOGOUT":return p({},e,{loading:!0,error:null});case"LOGOUT_SUCCESS":return p({},e,{loading:!1});case"LOGOUT_FAILURE":return p({},e,{loading:!1,error:t.payload});case"CREATE_ACCOUNT":return p({},e,{loading:!0});case"CREATE_ACCOUNT_SUCCESS":return p({},e,{loading:!1});case"CREATE_ACCOUNT_FAILURE":return p({},e,{loading:!1,error:t.payload});default:return e}},O={loading:!1,installed:null,error:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INSTALLATION_STATUS":return{loading:!0,installed:null,error:null};case"FETCH_INSTALLATION_STATUS_SUCCESS":return{loading:!1,installed:t.payload,error:null};case"FETCH_INSTALLATION_STATUS_FAILURE":return{loading:!1,installed:null,error:t.payload};default:return e}},b=Object(u.c)({account:f,installation:m}),E=n(4),h=function(e){return e.installation.installed},y=function(e){return e.installation.loading},v=function(e){return e.installation.error},w=n(1),g=n.n(w),C=n(2),j=n(8),S=n(26),T=n.n(S),A=n(27),U=Object(A.a)()?"edify/backend":"http://localhost:8000/backend",_=function(){var e=Object(C.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T()({method:n,url:"".concat(U,"/").concat(t),data:r});case 3:return e.abrupt("return",e.sent.data);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.error){e.next=13;break}throw console.trace(e.t0),new Error("An unknown error occured.");case 13:throw console.trace(e.t0.response.data.error),new Error(e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(t,"get"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(t,"post",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e,t){return function(){var n=Object(C.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CREATE_ACCOUNT"}),n.prev=1,n.next=4,I("auth/init.php",{username:e,password:t});case 4:r({type:"CREATE_ACCOUNT_SUCCESS"}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),r({type:"CREATE_ACCOUNT_FAILURE",payload:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()},k=(n(56),function(e){return{type:"FETCH_INSTALLATION_STATUS_SUCCESS",payload:e}}),x=function(){return function(){var e=Object(C.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_INSTALLATION_STATUS"}),e.prev=1,e.t0=t,e.t1=k,e.next=6,L("installation/status.php");case 6:e.t2=e.sent.installed,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.next=14;break;case 11:e.prev=11,e.t4=e.catch(1),t({type:"FETCH_INSTALLATION_STATUS_FAILURE",payload:e.t4.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=Object(E.b)(),t=Object(r.useState)(""),n=Object(j.a)(t,2),c=n[0],o=n[1],u=Object(r.useState)(""),l=Object(j.a)(u,2),i=l[0],s=l[1],p=Object(E.c)(v),d=Object(r.useCallback)(Object(C.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(N(c,i));case 2:e(x());case 3:case"end":return t.stop()}}),t)}))),[e,c,i]);return a.a.createElement("div",null,a.a.createElement("h1",null,"Edify Installation"),a.a.createElement("h3",null,"Create the admin user"),a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"username"},"Username:"),a.a.createElement("input",{onChange:function(e){return o(e.target.value)},type:"text",id:"username",placeholder:"Username"})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"password"},"Password:"),a.a.createElement("input",{onChange:function(e){return s(e.target.value)},type:"password",id:"password"})),a.a.createElement("button",{onClick:d,type:"button"},"Create user")),p&&a.a.createElement("p",{className:"error"},p))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={display:"flex"},D=function(e){var t=e.children,n=e.style;return a.a.createElement("div",{style:R({},G,{},n)},t)},H={backgroundColor:"#2C2C2C",width:70},B=function(){return a.a.createElement("div",{style:H})},J={flexGrow:1},W={width:"100%",height:"100%"},V=function(){return a.a.createElement("div",{style:J},a.a.createElement("iframe",{title:"contentIFrame",src:"/",frameBorder:"0",style:W}))},$={height:"100vh"},q=function(){return r.createElement(D,{style:$},r.createElement(B,null),r.createElement(V,null))},z=function(e){return null!==e.account.username},K=function(e){return e.account.error},M=function(){var e=Object(E.b)(),t=Object(E.c)(K),n=Object(r.useState)(""),c=Object(j.a)(n,2),o=c[0],u=c[1],l=Object(r.useState)(""),i=Object(j.a)(l,2),s=i[0],p=i[1],d=Object(r.useCallback)((function(){e(function(e,t){return function(){var n=Object(C.a)(g.a.mark((function n(r){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"LOGIN"}),n.prev=1,n.next=4,I("auth/login.php",{username:e,password:t});case 4:a=n.sent,r({type:"LOGIN_SUCCESS",payload:a}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r({type:"LOGIN_FAILURE",payload:n.t0.message});case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(o,s))}),[e,o,s]);return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"username"},"Username:"),a.a.createElement("input",{type:"text",id:"username",onChange:function(e){return u(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"password"},"Password:"),a.a.createElement("input",{type:"password",id:"password",onChange:function(e){return p(e.target.value)}})),a.a.createElement("button",{type:"button",onClick:d},"Login")),t&&a.a.createElement("p",null,t))},Q=function(){var e=Object(E.c)(h),t=Object(E.c)(y),n=Object(E.c)(z);return t?r.createElement(r.Fragment,null,"Loading..."):e?n?r.createElement(q,null):r.createElement(M,null):r.createElement(F,null)},X=function(e){var t=e.store;return r.createElement(E.a,{store:t},r.createElement(Q,null))},Y=Object(u.d)(b,Object(u.a)(l.a));Y.dispatch(x());var Z=function(){return a.a.createElement(X,{store:Y})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.c0a4ad7d.chunk.js.map