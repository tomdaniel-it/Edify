{"version":3,"sources":["util.tsx","reducers/accountReducer.tsx","actions/accountActionTypes.tsx","reducers/installationReducer.tsx","actions/installationActionTypes.tsx","reducers/rootReducer.tsx","selectors/installationSelectors.tsx","network/network.tsx","actions/accountActions.tsx","actions/installationActions.tsx","components/installation/InstallationScreen.tsx","components/general/FlexBox.tsx","components/editor/EditorBar.tsx","components/editor/ContentFrame.tsx","components/editor/EditorScreen.tsx","selectors/accountSelectors.tsx","components/login/LoginScreen.tsx","components/Root.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["isProduction","process","initialState","loading","error","username","accountReducer","state","action","type","payload","installed","installationReducer","rootReducer","combineReducers","account","installation","getInstalled","getLoading","getError","BACKEND_URL","request","endpoint","method","data","a","axios","url","response","console","trace","Error","get","post","createAccount","password","dispatch","network","message","fetchInstallationStatusSuccess","status","fetchInstallationStatus","InstallationScreen","useDispatch","useState","setUsername","setPassword","installationError","useSelector","createAccountCallback","useCallback","htmlFor","onChange","e","target","value","id","placeholder","onClick","className","flexBoxStyle","display","FlexBox","children","style","editorBarStyle","backgroundColor","width","EditorBar","contentFrameStyle","flexGrow","iframeStyle","height","ContentFrame","title","src","frameBorder","EditorScreen","getAuthenticated","LoginScreen","accountError","loginCallback","result","login","RootContent","isInstallationCheckLoading","isAuthenticated","Root","store","createStore","applyMiddleware","thunk","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"oGAAA,8CAAO,IAAMA,EACT,kBAAOC,IAAYA,sDAAeA,K,mwBCkBtC,IAAMC,EAA6B,CACjCC,SAAS,EACTC,MAAO,KACPC,SAAU,MA6DGC,EA1DQ,WAAiE,IAAhEC,EAA+D,uDAAvDL,EAAcM,EAAyC,uCACrF,OAAQA,EAAOC,MACb,ICzB0B,QD0BxB,MAAO,CACLN,SAAS,EACTE,SAAU,KACVD,MAAO,MAEX,IC9B0C,gBD+BxC,OAAO,EAAP,GACKG,EADL,GAEKC,EAAOE,QAFZ,CAGEP,SAAS,IAEb,ICnC0C,gBDoCxC,OAAO,EAAP,GACKI,EADL,CAEEJ,SAAS,EACTC,MAAOI,EAAOE,UAElB,ICxC4B,SDyC1B,OAAO,EAAP,GACKH,EADL,CAEEJ,SAAS,EACTC,MAAO,OAEX,IC7C4C,iBD8C1C,OAAO,EAAP,GACKG,EADL,CAEEJ,SAAS,IAEb,ICjD4C,iBDkD1C,OAAO,EAAP,GACKI,EADL,CAEEJ,SAAS,EACTC,MAAOI,EAAOE,UAElB,ICtD4C,iBDuD1C,OAAO,EAAP,GACKH,EADL,CAEEJ,SAAS,IAEb,IC1D4D,yBD2D1D,OAAO,EAAP,GACKI,EADL,CAEEJ,SAAS,IAEb,IC9D4D,yBD+D1D,OAAO,EAAP,GACKI,EADL,CAEEJ,SAAS,EACTC,MAAOI,EAAOE,UAElB,QACE,OAAOH,IElEPL,EAAkC,CACtCC,SAAS,EACTQ,UAAW,KACXP,MAAO,MA6BMQ,EAzBX,WAA2E,IAA1EL,EAAyE,uDAAjEL,EAAcM,EAAmD,uCAC1E,OAAQA,EAAOC,MACb,ICrBF,4BDsBI,MAAO,CACLN,SAAS,EACTQ,UAAW,KACXP,MAAO,MAEX,ICzBF,oCD0BI,MAAO,CACLD,SAAS,EACTQ,UAAWH,EAAOE,QAClBN,MAAO,MAEX,IC7BF,oCD8BI,MAAO,CACLD,SAAS,EACTQ,UAAW,KACXP,MAAOI,EAAOE,SAElB,QACE,OAAOH,IE3BAM,EALKC,YAAgB,CAClCC,QAAST,EACTU,aAAcJ,I,OCTHK,EAAe,SAACV,GAAD,OAA6BA,EAAMS,aAAaL,WAE/DO,EAAa,SAACX,GAAD,OAA6BA,EAAMS,aAAab,SAE7DgB,EAAW,SAACZ,GAAD,OAA6BA,EAAMS,aAAaZ,O,uDCHlEgB,EAAcpB,cAAiB,gBAAkB,gCAIjDqB,EAAO,uCAAG,WAAOC,EAAkBC,EAAgBC,GAAzC,SAAAC,EAAA,+EAEEC,IAAM,CAClBH,SACAI,IAAI,GAAD,OAAKP,EAAL,YAAoBE,GACvBE,SALU,uCAMRA,MANQ,mCAQP,KAAMI,UAAa,KAAMA,SAASJ,MAAS,KAAMI,SAASJ,KAAKpB,MARxD,uBASVyB,QAAQC,MAAR,MACM,IAAIC,MAAM,6BAVN,cAYVF,QAAQC,MAAM,KAAMF,SAASJ,KAAKpB,OAC5B,IAAI2B,MAAM,KAAMH,SAASJ,KAAKpB,OAb1B,yDAAH,0DAkBA4B,EAAG,uCAAG,WAAOV,GAAP,SAAAG,EAAA,+EAA4BJ,EAAQC,EAAU,QAA9C,2CAAH,sDAEHW,EAAI,uCAAG,WAAOX,EAAkBE,GAAzB,SAAAC,EAAA,+EAAwCJ,EAAQC,EAAU,OAAQE,IAAlE,2CAAH,wDC2CJU,EACT,SAAC7B,EAAkB8B,GAAnB,8CAAwC,WAAOC,GAAP,SAAAX,EAAA,6DACxCW,EAAS,CACP3B,KNjE0C,mBM+DJ,kBAMhC4B,EAAa,gBAAiB,CAAEhC,WAAU8B,aANV,OAOtCC,EAjB8B,CAClC3B,KNrD8D,2BM8DpB,gDAStC2B,EAf2C,CAC/C3B,KNxD8D,yBMyD9DC,QAakC,KAAE4B,UATM,yDAAxC,uDC/DEC,G,MAAiC,SAACC,GAAD,MAAsB,CAC3D/B,KLNE,oCKOFC,QAAS8B,KAQEC,EAA0B,yDAAM,WAAOL,GAAP,SAAAX,EAAA,6DAC3CW,EAAS,CACP3B,KLnBA,8BKiByC,cAMzC2B,EANyC,KAOvCG,EAPuC,SAODF,EAAY,2BAPX,mBAOuC1B,UAPvC,qFAUzCyB,EAfuD,CACzD3B,KLTE,oCKUFC,QAa0C,KAAE4B,UAVD,0DAAN,uDC6BxBI,EAvCY,WACzB,IAAMN,EAAWO,cADc,EAECC,mBAAS,IAFV,mBAExBvC,EAFwB,KAEdwC,EAFc,OAGCD,mBAAS,IAHV,mBAGxBT,EAHwB,KAGdW,EAHc,KAIzBC,EAAoBC,YAAY7B,GAEhC8B,EAAwBC,sBAAW,sBACvC,sBAAAzB,EAAA,sEACQW,EAASF,EAAc7B,EAAU8B,IADzC,OAEEC,EAASK,KAFX,2CAIA,CAACL,EAAU/B,EAAU8B,IAGvB,OACE,6BACE,kDACA,qDACA,8BACE,6BACE,2BAAOgB,QAAQ,YAAf,aACA,2BACEC,SAAU,SAACC,GAAD,OAAOR,EAAYQ,EAAEC,OAAOC,QACtC9C,KAAK,OACL+C,GAAG,WACHC,YAAY,cAGhB,6BACE,2BAAON,QAAQ,YAAf,aACA,2BAAOC,SAAU,SAACC,GAAD,OAAOP,EAAYO,EAAEC,OAAOC,QAAQ9C,KAAK,WAAW+C,GAAG,cAE1E,4BAAQE,QAAST,EAAuBxC,KAAK,UAA7C,gBAEDsC,GAAqB,uBAAGY,UAAU,SAASZ,K,yjBCxClD,IAAMa,EAAe,CACnBC,QAAS,QAWIC,EAHC,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,MAAb,OACd,yBAAKA,MAAK,KAAOJ,EAAP,GAAwBI,IAAUD,ICVxCE,EAAiB,CACrBC,gBAAiB,UACjBC,MAAO,IAKMC,EAFG,kBAAM,yBAAKJ,MAAOC,KCL9BI,EAAoB,CACxBC,SAAU,GAGNC,EAAc,CAClBJ,MAAO,OACPK,OAAQ,QASKC,EANM,kBACnB,yBAAKT,MAAOK,GACV,4BAAQK,MAAM,gBAAgBC,IAAI,IAAIC,YAAY,IAAIZ,MAAOO,MCR3DX,EAAe,CACnBY,OAAQ,SAUKK,EAPM,kBACnB,gBAAC,EAAD,CAASb,MAAOJ,GACd,gBAAC,EAAD,MACA,gBAAC,EAAD,QCVSkB,EAAmB,SAACvE,GAAD,OAAwD,OAA3BA,EAAMQ,QAAQV,UAE9Dc,EAAW,SAACZ,GAAD,OAA6BA,EAAMQ,QAAQX,OCgCpD2E,EA/BK,WAClB,IAAM3C,EAAWO,cACXqC,EAAehC,YAAY7B,GAFT,EAGQyB,mBAAS,IAHjB,mBAGjBvC,EAHiB,KAGPwC,EAHO,OAIQD,mBAAS,IAJjB,mBAIjBT,EAJiB,KAIPW,EAJO,KAMlBmC,EAAgB/B,uBACpB,WACEd,ERae,SAAC/B,EAAkB8B,GAAnB,8CAAwC,WAAOC,GAAP,eAAAX,EAAA,6DAC3DW,EAAS,CACP3B,KN1B0B,UMwB+B,kBAM3B4B,EAAa,iBAAkB,CAAEhC,WAAU8B,aANhB,OAMnD+C,EANmD,OAOzD9C,EAjBwC,CAC1C3B,KNd4C,gBMe5CC,QAewBwE,IAPmC,gDASzD9C,EAdqC,CACvC3B,KNlB4C,gBMmB5CC,QAYwB,KAAM4B,UAT6B,yDAAxC,sDQbN6C,CAAM9E,EAAU8B,MAE3B,CAACC,EAAU/B,EAAU8B,IAGvB,OACE,6BACE,8BACE,6BACE,2BAAOgB,QAAQ,YAAf,aACA,2BAAO1C,KAAK,OAAO+C,GAAG,WAAWJ,SAAU,SAACC,GAAD,OAAOR,EAAYQ,EAAEC,OAAOC,WAEzE,6BACE,2BAAOJ,QAAQ,YAAf,aACA,2BAAO1C,KAAK,WAAW+C,GAAG,WAAWJ,SAAU,SAACC,GAAD,OAAOP,EAAYO,EAAEC,OAAOC,WAE7E,4BAAQ9C,KAAK,SAASiD,QAASuB,GAA/B,UAEDD,GAAgB,2BAAIA,KCtBrBI,EAAc,WAClB,IAAMzE,EAAYqC,YAAY/B,GACxBoE,EAA6BrC,YAAY9B,GACzCoE,EAAkBtC,YAAY8B,GAEpC,OAAIO,EAAmC,8CAClC1E,EACA2E,EACE,gBAAC,EAAD,MADsB,gBAAC,EAAD,MADN,gBAAC,EAAD,OAKZC,EAAO,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAClB,gBAAC,IAAD,CAAUA,MAAOA,GACf,gBAAC,EAAD,QCdEA,EAAQC,YAAY5E,EAAa6E,YAAgBC,MACvDH,EAAMpD,SAAcK,KAEpB,IAIemD,EAJO,kBACpB,kBAAC,EAAD,CAAMJ,MAAOA,KCAKK,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.c0a4ad7d.chunk.js","sourcesContent":["export const isProduction\n  = () => !process || !process.env || process.env.NODE_ENV !== 'development';\n\nexport const isDevelopment = () => !isProduction();\n\n// eslint-disable-next-line no-alert\nexport const handleUnexpectedError = (error: string) => alert(error);\n","import {\n  AccountActions,\n  LOGIN,\n  LOGIN_SUCCESS,\n  LOGIN_FAILURE,\n  CREATE_ACCOUNT,\n  CREATE_ACCOUNT_SUCCESS,\n  CREATE_ACCOUNT_FAILURE,\n  LOGOUT,\n  LOGOUT_SUCCESS,\n  LOGOUT_FAILURE,\n} from '../actions/accountActionTypes';\n\nexport interface AccountState {\n  loading: boolean,\n  error: string|null,\n  username: string|null,\n}\n\nconst initialState: AccountState = {\n  loading: false,\n  error: null,\n  username: null,\n};\n\nconst accountReducer = (state = initialState, action: AccountActions): AccountState => {\n  switch (action.type) {\n    case LOGIN:\n      return {\n        loading: true,\n        username: null,\n        error: null,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        ...action.payload,\n        loading: false,\n      };\n    case LOGIN_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case LOGOUT_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n      };\n    case LOGOUT_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    case CREATE_ACCOUNT:\n      return {\n        ...state,\n        loading: true,\n      };\n    case CREATE_ACCOUNT_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n      };\n    case CREATE_ACCOUNT_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default accountReducer;\n","import { Account } from '../types/types';\n\nexport const LOGIN: 'LOGIN' = 'LOGIN';\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE: 'LOGIN_FAILURE' = 'LOGIN_FAILURE';\nexport const LOGOUT: 'LOGOUT' = 'LOGOUT';\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\nexport const LOGOUT_FAILURE: 'LOGOUT_FAILURE' = 'LOGOUT_FAILURE';\nexport const CREATE_ACCOUNT: 'CREATE_ACCOUNT' = 'CREATE_ACCOUNT';\nexport const CREATE_ACCOUNT_SUCCESS: 'CREATE_ACCOUNT_SUCCESS' = 'CREATE_ACCOUNT_SUCCESS';\nexport const CREATE_ACCOUNT_FAILURE: 'CREATE_ACCOUNT_FAILURE' = 'CREATE_ACCOUNT_FAILURE';\n\nexport interface Login {\n  type: typeof LOGIN,\n}\n\nexport interface LoginSuccess {\n  type: typeof LOGIN_SUCCESS,\n  payload: Account,\n}\n\nexport interface LoginFailure {\n  type: typeof LOGIN_FAILURE,\n  payload: string,\n}\n\nexport interface Logout {\n  type: typeof LOGOUT,\n}\n\nexport interface LogoutSuccess {\n  type: typeof LOGOUT_SUCCESS,\n}\n\nexport interface LogoutFailure {\n  type: typeof LOGOUT_FAILURE,\n  payload: string,\n}\n\nexport interface CreateAccount {\n  type: typeof CREATE_ACCOUNT,\n}\n\nexport interface CreateAccountSuccess {\n  type: typeof CREATE_ACCOUNT_SUCCESS,\n}\n\nexport interface CreateAccountFailure {\n  type: typeof CREATE_ACCOUNT_FAILURE,\n  payload: string,\n}\n\nexport type AccountActions\n  = Login\n  | LoginSuccess\n  | LoginFailure\n  | Logout\n  | LogoutSuccess\n  | LogoutFailure\n  | CreateAccount\n  | CreateAccountSuccess\n  | CreateAccountFailure\n","import {\n  InstallationActions,\n  FETCH_INSTALLATION_STATUS,\n  FETCH_INSTALLATION_STATUS_SUCCESS,\n  FETCH_INSTALLATION_STATUS_FAILURE,\n} from '../actions/installationActionTypes';\n\nexport interface InstallationState {\n  loading: boolean,\n  installed: boolean|null,\n  error: string|null,\n}\n\nconst initialState: InstallationState = {\n  loading: false,\n  installed: null,\n  error: null,\n};\n\nconst installationReducer\n  = (state = initialState, action: InstallationActions): InstallationState => {\n    switch (action.type) {\n      case FETCH_INSTALLATION_STATUS:\n        return {\n          loading: true,\n          installed: null,\n          error: null,\n        };\n      case FETCH_INSTALLATION_STATUS_SUCCESS:\n        return {\n          loading: false,\n          installed: action.payload,\n          error: null,\n        };\n      case FETCH_INSTALLATION_STATUS_FAILURE:\n        return {\n          loading: false,\n          installed: null,\n          error: action.payload,\n        };\n      default:\n        return state;\n    }\n  };\n\nexport default installationReducer;\n","export const FETCH_INSTALLATION_STATUS: 'FETCH_INSTALLATION_STATUS'\n  = 'FETCH_INSTALLATION_STATUS';\nexport const FETCH_INSTALLATION_STATUS_SUCCESS: 'FETCH_INSTALLATION_STATUS_SUCCESS'\n  = 'FETCH_INSTALLATION_STATUS_SUCCESS';\nexport const FETCH_INSTALLATION_STATUS_FAILURE: 'FETCH_INSTALLATION_STATUS_FAILURE'\n  = 'FETCH_INSTALLATION_STATUS_FAILURE';\n\nexport interface FetchInstallationStatus {\n  type: typeof FETCH_INSTALLATION_STATUS,\n}\n\nexport interface FetchInstallationStatusSuccess {\n  type: typeof FETCH_INSTALLATION_STATUS_SUCCESS,\n  payload: boolean,\n}\n\nexport interface FetchInstallationStatusFailure {\n  type: typeof FETCH_INSTALLATION_STATUS_FAILURE,\n  payload: string,\n}\n\nexport type InstallationActions\n  = FetchInstallationStatus\n  | FetchInstallationStatusSuccess\n  | FetchInstallationStatusFailure\n","import { combineReducers } from 'redux';\nimport accountReducer, { AccountState } from './accountReducer';\nimport installationReducer, { InstallationState } from './installationReducer';\n\nexport interface ApplicationState {\n  account: AccountState,\n  installation: InstallationState,\n}\n\nconst rootReducer = combineReducers({\n  account: accountReducer,\n  installation: installationReducer,\n});\n\nexport default rootReducer;\n","import { ApplicationState } from '../reducers/rootReducer';\n\nexport const getInstalled = (state: ApplicationState) => state.installation.installed;\n\nexport const getLoading = (state: ApplicationState) => state.installation.loading;\n\nexport const getError = (state: ApplicationState) => state.installation.error;\n","import axios from 'axios';\nimport { isProduction } from '../util';\n\nconst BACKEND_URL = isProduction() ? 'edify/backend' : 'http://localhost:8000/backend';\n\ntype Method = 'get' | 'post' | 'put' | 'delete';\n\nconst request = async (endpoint: string, method: Method, data?: any) => {\n  try {\n    return (await axios({\n      method,\n      url: `${BACKEND_URL}/${endpoint}`,\n      data,\n    })).data;\n  } catch (error) {\n    if (!error.response || !error.response.data || !error.response.data.error) {\n      console.trace(error);\n      throw new Error('An unknown error occured.');\n    } else {\n      console.trace(error.response.data.error);\n      throw new Error(error.response.data.error);\n    }\n  }\n};\n\nexport const get = async (endpoint: string) => request(endpoint, 'get');\n\nexport const post = async (endpoint: string, data?: any) => request(endpoint, 'post', data);\n\nexport const put = async (endpoint: string, data?: any) => request(endpoint, 'put', data);\n\nexport const del = async (endpoint: string) => request(endpoint, 'delete');\n","import { Dispatch } from 'react';\n\nimport { Account } from '../types/types';\nimport {\n  LOGIN,\n  LOGIN_SUCCESS,\n  LOGIN_FAILURE,\n  CREATE_ACCOUNT,\n  CREATE_ACCOUNT_SUCCESS,\n  CREATE_ACCOUNT_FAILURE,\n  LOGOUT,\n  LOGOUT_SUCCESS,\n  LOGOUT_FAILURE,\n} from './accountActionTypes';\nimport * as network from '../network/network';\n\nconst loginSuccess = (account: Account) => ({\n  type: LOGIN_SUCCESS,\n  payload: account,\n});\n\nconst loginFailure = (error: string) => ({\n  type: LOGIN_FAILURE,\n  payload: error,\n});\n\nexport const login = (username: string, password: string) => async (dispatch: Dispatch<any>) => {\n  dispatch({\n    type: LOGIN,\n  });\n\n  try {\n    const result: Account = await network.post('auth/login.php', { username, password });\n    dispatch(loginSuccess(result));\n  } catch (error) {\n    dispatch(loginFailure(error.message));\n  }\n};\n\nconst logoutSuccess = () => ({\n  type: LOGOUT_SUCCESS,\n});\n\nconst logoutFailure = (error: string) => ({\n  type: LOGOUT_FAILURE,\n  payload: error,\n});\n\nexport const logout = () => async (dispatch: Dispatch<any>) => {\n  dispatch({\n    type: LOGOUT,\n  });\n\n  try {\n    await network.get('auth/logout.php');\n    dispatch(logoutSuccess());\n  } catch (error) {\n    dispatch(logoutFailure(error.message));\n  }\n};\n\nconst createAccountSuccess = () => ({\n  type: CREATE_ACCOUNT_SUCCESS,\n});\n\nconst createAccountFailure = (error: string) => ({\n  type: CREATE_ACCOUNT_FAILURE,\n  payload: error,\n});\n\nexport const createAccount\n  = (username: string, password: string) => async (dispatch: Dispatch<any>) => {\n    dispatch({\n      type: CREATE_ACCOUNT,\n    });\n\n    try {\n      await network.post('auth/init.php', { username, password });\n      dispatch(createAccountSuccess());\n    } catch (e) {\n      dispatch(createAccountFailure(e.message));\n    }\n  };\n","import { Dispatch } from 'react';\nimport {\n  FETCH_INSTALLATION_STATUS_SUCCESS,\n  FETCH_INSTALLATION_STATUS_FAILURE,\n  FETCH_INSTALLATION_STATUS,\n} from './installationActionTypes';\nimport * as network from '../network/network';\n\nconst fetchInstallationStatusSuccess = (status: boolean) => ({\n  type: FETCH_INSTALLATION_STATUS_SUCCESS,\n  payload: status,\n});\n\nconst fetchInstallationStatusFailure = (error: string) => ({\n  type: FETCH_INSTALLATION_STATUS_FAILURE,\n  payload: error,\n});\n\nexport const fetchInstallationStatus = () => async (dispatch: Dispatch<any>) => {\n  dispatch({\n    type: FETCH_INSTALLATION_STATUS,\n  });\n\n  try {\n    dispatch(\n      fetchInstallationStatusSuccess((await network.get('installation/status.php')).installed),\n    );\n  } catch (e) {\n    dispatch(fetchInstallationStatusFailure(e.message));\n  }\n};\n","import React, { useCallback, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { createAccount } from '../../actions/accountActions';\nimport { getError } from '../../selectors/installationSelectors';\nimport './InstallationScreen.css';\nimport { fetchInstallationStatus } from '../../actions/installationActions';\n\nconst InstallationScreen = () => {\n  const dispatch = useDispatch();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const installationError = useSelector(getError);\n\n  const createAccountCallback = useCallback(\n    async () => {\n      await dispatch(createAccount(username, password));\n      dispatch(fetchInstallationStatus());\n    },\n    [dispatch, username, password],\n  );\n\n  return (\n    <div>\n      <h1>Edify Installation</h1>\n      <h3>Create the admin user</h3>\n      <form>\n        <div>\n          <label htmlFor=\"username\">Username:</label>\n          <input\n            onChange={(e) => setUsername(e.target.value)}\n            type=\"text\"\n            id=\"username\"\n            placeholder=\"Username\"\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Password:</label>\n          <input onChange={(e) => setPassword(e.target.value)} type=\"password\" id=\"password\" />\n        </div>\n        <button onClick={createAccountCallback} type=\"button\">Create user</button>\n      </form>\n      {installationError && <p className=\"error\">{installationError}</p>}\n    </div>\n  );\n};\n\nexport default InstallationScreen;\n","import React from 'react';\n\nconst flexBoxStyle = {\n  display: 'flex',\n};\n\ninterface FlexBoxProps {\n  children?: React.ReactElement|React.ReactElement[]\n  style: Object\n}\n\nconst FlexBox = ({ children, style }: FlexBoxProps) =>\n  <div style={{ ...flexBoxStyle, ...style }}>{children}</div>;\n\nexport default FlexBox;\n","import React from 'react';\n\nconst editorBarStyle = {\n  backgroundColor: '#2C2C2C',\n  width: 70,\n};\n\nconst EditorBar = () => <div style={editorBarStyle} />;\n\nexport default EditorBar;\n","import React from 'react';\n\nconst contentFrameStyle = {\n  flexGrow: 1,\n};\n\nconst iframeStyle = {\n  width: '100%',\n  height: '100%',\n};\n\nconst ContentFrame = () => (\n  <div style={contentFrameStyle}>\n    <iframe title=\"contentIFrame\" src=\"/\" frameBorder=\"0\" style={iframeStyle} />\n  </div>\n);\n\nexport default ContentFrame;\n","import * as React from 'react';\nimport FlexBox from '../general/FlexBox';\nimport EditorBar from './EditorBar';\nimport ContentFrame from './ContentFrame';\n\nconst flexBoxStyle = {\n  height: '100vh',\n};\n\nconst EditorScreen = () => (\n  <FlexBox style={flexBoxStyle}>\n    <EditorBar />\n    <ContentFrame />\n  </FlexBox>\n);\n\nexport default EditorScreen;\n","import { ApplicationState } from '../reducers/rootReducer';\n\nexport const getAuthenticated = (state: ApplicationState) => state.account.username !== null;\n\nexport const getError = (state: ApplicationState) => state.account.error;\n","import React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login } from '../../actions/accountActions';\nimport { getError } from '../../selectors/accountSelectors';\n\nconst LoginScreen = () => {\n  const dispatch = useDispatch();\n  const accountError = useSelector(getError);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const loginCallback = useCallback(\n    () => {\n      dispatch(login(username, password));\n    },\n    [dispatch, username, password],\n  );\n\n  return (\n    <div>\n      <form>\n        <div>\n          <label htmlFor=\"username\">Username:</label>\n          <input type=\"text\" id=\"username\" onChange={(e) => setUsername(e.target.value)} />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Password:</label>\n          <input type=\"password\" id=\"password\" onChange={(e) => setPassword(e.target.value)} />\n        </div>\n        <button type=\"button\" onClick={loginCallback}>Login</button>\n      </form>\n      {accountError && <p>{accountError}</p>}\n    </div>\n  );\n};\n\nexport default LoginScreen;\n","import * as React from 'react';\nimport { Provider, useSelector } from 'react-redux';\nimport { Store } from 'redux';\nimport { getInstalled, getLoading } from '../selectors/installationSelectors';\nimport InstallationScreen from './installation/InstallationScreen';\nimport EditorScreen from './editor/EditorScreen';\nimport LoginScreen from './login/LoginScreen';\nimport { getAuthenticated } from '../selectors/accountSelectors';\n\nconst RootContent = () => {\n  const installed = useSelector(getInstalled);\n  const isInstallationCheckLoading = useSelector(getLoading);\n  const isAuthenticated = useSelector(getAuthenticated);\n\n  if (isInstallationCheckLoading) return <>Loading...</>;\n  if (!installed) return <InstallationScreen />;\n  if (!isAuthenticated) return <LoginScreen />;\n  return <EditorScreen />;\n};\n\nexport const Root = ({ store }: { store: Store<any> }) => (\n  <Provider store={store}>\n    <RootContent />\n  </Provider>\n);\n","import React from 'react';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers/rootReducer';\nimport { Root } from './components/Root';\nimport { fetchInstallationStatus } from './actions/installationActions';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\nstore.dispatch<any>(fetchInstallationStatus());\n\nconst App: React.FC = () => (\n  <Root store={store} />\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}